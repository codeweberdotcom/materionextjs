# üîç –£–ì–õ–£–ë–õ–ï–ù–ù–´–ô –ê–ù–ê–õ–ò–ó –ú–û–î–£–õ–Ø –ß–ê–¢–ê

## üìä –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-11-16  
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–π –º–æ–¥—É–ª—å:** Chat (Socket.IO + REST API + React)  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ú–û–î–£–õ–Ø

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Backend):**
   - Socket.IO namespace: `src/lib/sockets/namespaces/chat/index.ts` (502 —Å—Ç—Ä–æ–∫–∏)
   - REST API: `src/app/api/chat/messages/route.ts` (199 —Å—Ç—Ä–æ–∫)
   - Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: `src/lib/sockets/middleware/auth.ts` (267 —Å—Ç—Ä–æ–∫)
   - –¢–∏–ø—ã: `src/lib/sockets/types/chat.ts` (137 —Å—Ç—Ä–æ–∫)

2. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Frontend):**
   - –û—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫: `src/hooks/useChatNew.ts` (914 —Å—Ç—Ä–æ–∫) ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–õ–û–ñ–ù–û–°–¢–¨
   - Redux —Å–ª–∞–π—Å—ã:
     - `src/redux-store/slices/chat.ts`
     - `src/redux-store/slices/chatQueue.ts` (86 —Å—Ç—Ä–æ–∫)
   - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
     - `src/views/apps/chat/index.tsx`
     - `src/views/apps/chat/ChatContent.tsx` (289 —Å—Ç—Ä–æ–∫)
     - `src/views/apps/chat/ChatLog.tsx`
     - `src/views/apps/chat/SidebarLeft.tsx`
     - `src/views/apps/chat/SendMsgForm.tsx`

3. **–£—Ç–∏–ª–∏—Ç—ã:**
   - `src/utils/chat/normalizeMessageContent.ts` (31 —Å—Ç—Ä–æ–∫–∞)

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Security)**

#### 1.1. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ Rate Limit –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `src/hooks/useChatNew.ts` (—Å—Ç—Ä–æ–∫–∏ 881-913)  
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø

```typescript
const readStoredRateLimit = (userId?: string): number | null => {
  if (typeof window === 'undefined' || !userId) return null
  try {
    const raw = window.localStorage.getItem(RATE_LIMIT_STORAGE_KEY)
    // Rate limit –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage!
    const parsed = JSON.parse(raw) as Record<string, number>
    return parsed[userId]
  } catch {
    return null
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Rate limit –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –æ—á–∏—Å—Ç–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ DevTools
- –û–±—Ö–æ–¥–∏—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∫–ª–∞–¥–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞
- –ù–ï–¢ server-side session-based –∑–∞—â–∏—Ç—ã

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–µ–Ω —Å–ø–∞–º –∏ DoS –∞—Ç–∞–∫–∏
- Rate limiting —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å rate limiting –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis/Memory cache –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
3. –ü—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã –∫ IP + userId –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
4. –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ß–ò–¢–ê–¢–¨ —Å—Ç–∞—Ç—É—Å, –Ω–æ –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

#### 1.2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
**–§–∞–π–ª—ã:**
- `src/lib/sockets/namespaces/chat/index.ts` (—Å—Ç—Ä–æ–∫–∞ 211)
- `src/app/api/chat/messages/route.ts` (—Å—Ç—Ä–æ–∫–∞ 153)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// Socket.IO namespace
if (data.message.length > 1000) {
  socket.emit('error', { message: 'Message too long' });
  return;
}
// –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ë–ï–ó —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
const newMessage = await prisma.message.create({
  data: {
    content: data.message, // ‚ùå –ù–µ—Ç —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏!
    senderId: data.senderId,
    roomId: data.roomId
  }
})
```

```typescript
// REST API
if (!roomId || !message || typeof message !== 'string') {
  return NextResponse.json({ error: 'roomId and message are required' }, { status: 400 })
}
// ‚ùå –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã –≤ HTTP API!
const newMessage = await prisma.message.create({
  data: {
    content: message, // ‚ùå –ù–µ—Ç —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏!
    senderId: user.id,
    roomId
  }
})
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –í REST API –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è
2. –ù–µ—Ç trim() –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
3. –ù–µ—Ç —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (—Ö–æ—Ç—è React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤ JSX)
4. –í–æ–∑–º–æ–∂–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ HTTP API

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –µ–¥–∏–Ω—É—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É MAX_MESSAGE_LENGTH (1000 —Å–∏–º–≤–æ–ª–æ–≤)
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–ª–∏–Ω—É –Ω–∞ –≤—Å–µ—Ö entry points (Socket.IO + REST API)
3. –î–æ–±–∞–≤–∏—Ç—å trim() –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–±–µ–ª–æ–≤
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—é —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
5. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ –ø—É—Å—Ç—ã–µ/—Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

#### 1.3. –£—Ç–µ—á–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª:** `src/lib/sockets/namespaces/chat/index.ts` (—Å—Ç—Ä–æ–∫–∏ 454-471)

```typescript
export const getOnlineUsers = async () => {
  const allUsers = await prisma.user.findMany({
    select: {
      id: true,
      isActive: true,
      email: true,
      country: true,
      image: true,
      name: true,
      language: true,
      currency: true,
      roleId: true,
      password: true, // ‚ùå‚ùå‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –£–¢–ï–ß–ö–ê!
      emailVerified: true,
      createdAt: true,
      updatedAt: true,
      lastSeen: true
    }
  })
  // ...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –•—ç—à –ø–∞—Ä–æ–ª—è –≤–∫–ª—é—á–µ–Ω –≤ select (—Å—Ç—Ä–æ–∫–∞ 465)
- –î–∞–∂–µ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- –ò–∑–ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ (roleId, emailVerified, createdAt, updatedAt) –Ω–µ –Ω—É–∂–Ω—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ù–ï–ú–ï–î–õ–ï–ù–ù–û —É–¥–∞–ª–∏—Ç—å `password: true` –∏–∑ select
2. –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–∏—Ä–∞–µ–º—ã–µ –ø–æ–ª—è –¥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö: `id`, `lastSeen`
3. –ü—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç –≤—Å–µ—Ö Prisma queries –Ω–∞ —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

#### 1.4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
**–§–∞–π–ª:** `src/lib/sockets/middleware/auth.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ç—ã—Å—è—á–∏ Socket.IO —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–æ–∑–º–æ–∂–Ω–∞ DoS –∞—Ç–∞–∫–∞ —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—â–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (max 5 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ IP/userId –≤ –º–∏–Ω—É—Ç—É)
2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (max 3-5)
3. –î–æ–±–∞–≤–∏—Ç—å heartbeat timeout –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

### 2. **–ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (Stability)**

#### 2.1. –ò–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å useChatNew —Ö—É–∫–∞
**–§–∞–π–ª:** `src/hooks/useChatNew.ts` (914 —Å—Ç—Ä–æ–∫)  
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- 914 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –≤ –æ–¥–Ω–æ–º —Ö—É–∫–µ
- 60+ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- 15+ useState —Ö—É–∫–æ–≤
- 10+ useEffect —Ö—É–∫–æ–≤
- –°–º–µ—à–∏–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, UI state, side effects, network calls

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏** - –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π flow –¥–∞–Ω–Ω—ã—Ö
3. **–†–∏—Å–∫ memory leaks** - –º–Ω–æ–∂–µ—Å—Ç–≤–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ —Å–ª—É—à–∞—Ç–µ–ª–µ–π
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** - –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã
5. **–ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle**

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ useEffect:**
```typescript
// –°—Ç—Ä–æ–∫–∞ 392 - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
useEffect(() => {
  // ...
}, [user?.id, currentOtherUserId, isOnline, rateLimitData?.blockedUntil, requestRateLimitStatus])
// ‚ùå requestRateLimitStatus –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö - –Ω–µ –æ–±–µ—Ä–Ω—É—Ç –≤ useCallback —Å—Ç–∞–±–∏–ª—å–Ω–æ!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤:
   - `useChatConnection.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
   - `useChatMessages.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π
   - `useChatRateLimit.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ rate limiting
   - `useChatQueue.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - `useChatRoom.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
2. –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã/—É—Ç–∏–ª–∏—Ç—ã
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query –¥–ª—è server state
4. Redux –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ UI state

---

#### 2.2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ state management
**–§–∞–π–ª—ã:**
- `src/redux-store/slices/chat.ts`
- `src/redux-store/slices/chatQueue.ts`
- `src/hooks/useChatNew.ts` (–ª–æ–∫–∞–ª—å–Ω—ã–π state)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ state —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- Redux + –ª–æ–∫–∞–ª—å–Ω—ã–π useState –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å server state
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (source of truth)

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:**
```typescript
// –í useChatNew.ts
const [messages, setMessages] = useState<ChatMessage[]>([])

// + Redux —Å–ª–∞–π—Å chat
// + Redux —Å–ª–∞–π—Å chatQueue
// = 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã:
   - Server state ‚Üí React Query
   - UI state ‚Üí Redux
   - –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π state + React Query
2. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏
3. –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

---

#### 2.3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏
**–§–∞–π–ª:** `src/redux-store/slices/chatQueue.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
enqueueMessage: (state, action: PayloadAction<EnqueuePayload>) => {
  const clientId = action.payload.clientId || nanoid()
  state.messages[clientId] = {
    // ...
  }
  // ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏!
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ –¥–æ–ª–≥–æ–º offline –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∫–æ–ø–∏—Ç—å —Ç—ã—Å—è—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏
- –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (max 50-100 —Å–æ–æ–±—â–µ–Ω–∏–π)
2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
3. Oldest messages first (—É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏)
4. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ IndexedDB –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

---

#### 2.4. Race conditions –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
**–§–∞–π–ª:** `src/hooks/useChatNew.ts` (—Å—Ç—Ä–æ–∫–∏ 633-739)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã sendMessage –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
- –ù–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ clientId –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –í–æ–∑–º–æ–∂–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Å–æ–æ–±—â–µ–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å debounce/throttle –¥–ª—è sendMessage
2. –î–∏–∑–µ–π–±–ª–∏—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ –≤—Ä–µ–º—è sending
3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å clientId –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å API endpoints

---

#### 2.5. In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ activeUsers –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
**–§–∞–π–ª:** `src/lib/sockets/namespaces/chat/index.ts` (—Å—Ç—Ä–æ–∫–∏ 11-12)

```typescript
const activeUsers = new Map<string, string>(); // userId -> socketId
const onlineUsers = new Map<string, { socketId: string; connectedAt: Date }>();
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤) Maps –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º, –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –æ–Ω–ª–∞–π–Ω
- –°–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è activeUsers/onlineUsers
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis adapter –¥–ª—è Socket.IO
3. –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

---

### 3. **–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Performance)**

#### 3.1. –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ React keys —Å Math.random()
**–§–∞–π–ª:** `src/views/apps/chat/SidebarLeft.tsx` (—Å—Ç—Ä–æ–∫–∞ 132)

```typescript
key={`contact-${Math.random()}-${contact.about || 'no-about'}`}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- React –Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å reconciliation
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü–æ—Ç–µ—Ä—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Ñ–æ–∫—É—Å, —Å–∫—Ä–æ–ª–ª, –∞–Ω–∏–º–∞—Ü–∏–∏)
- –õ–∏—à–Ω–∏–µ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –ú–µ—Ä—Ü–∞–Ω–∏–µ UI
- –ü–ª–æ—Ö–æ–π UX

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```typescript
key={`contact-${contact.id}`} // ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
```

---

#### 3.2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
**–§–∞–π–ª—ã:** `ChatLog.tsx`, `SidebarLeft.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –í —á–∞—Ç–µ —Å 1000+ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤—Å–µ 1000 DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥
- –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-window` –∏–ª–∏ `react-virtuoso` –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏
2. –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è + –Ω–µ–±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä
3. Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–∞–≤–∞—Ç–∞—Ä–æ–≤

---

#### 3.3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
**–§–∞–π–ª:** `src/hooks/useChatNew.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- –ù–µ—Ç React.memo –¥–ª—è –¥–æ—Ä–æ–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ù–µ—Ç useMemo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –õ–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã –≤—Å–µ–≥–æ –¥–µ—Ä–µ–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –û–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ useCallback
2. –û–±–µ—Ä–Ω—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤ React.memo
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useMemo –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

---

#### 3.4. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
**–§–∞–π–ª:** `src/lib/sockets/namespaces/chat/index.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// –ö–∞–∂–¥—ã–π ping –æ–±–Ω–æ–≤–ª—è–µ—Ç lastSeen
socket.on('ping', async (data, callback) => {
  await prisma.user.update({
    where: { id: userId },
    data: { lastSeen: new Date() }
  })
  // –ï—Å–ª–∏ –ø–∏–Ω–≥–∏ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫ = 360 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!
})
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ë–∞—Ç—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è lastSeen (—Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É, –∞ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º ping)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
3. –û–±–Ω–æ–≤–ª—è—Ç—å –ë–î —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (>30 —Å–µ–∫)

---

### 4. **–ü—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ (Code Quality)**

#### 4.1. –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @ts-nocheck
**–§–∞–π–ª—ã:**
- `src/hooks/useChatNew.ts` (–Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å —Å–ª–æ–∂–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è)
- `src/app/api/chat/messages/route.ts` (—Å—Ç—Ä–æ–∫–∞ 1)
- `src/views/apps/chat/ChatContent.tsx` (—Å—Ç—Ä–æ–∫–∞ 1)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω—ã
- –¢–µ—Ä—è—é—Ç—Å—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- –û—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ runtime
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–±–∏—Ä–∞—Ç—å @ts-nocheck
2. –î–æ–±–∞–≤–∏—Ç—å proper —Ç–∏–ø–∏–∑–∞—Ü–∏—é
3. –í–∫–ª—é—á–∏—Ç—å strict —Ä–µ–∂–∏–º TypeScript
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∑–∞–ø—Ä–µ—Ç–∞ @ts-nocheck

---

#### 4.2. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í Socket.IO handlers - emit('error', { message })
- –í REST API - NextResponse.json({ error })
- –í React components - toast.error()
- –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—à–∏–±–æ–∫ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
3. –î–æ–±–∞–≤–∏—Ç—å Error Boundaries –≤ React
4. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error logger

---

#### 4.3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ `tests/e2e/chat.spec.ts`
- –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —É—Ç–∏–ª–∏—Ç
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ö—É–∫–æ–≤
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Socket.IO handlers
- –°–ª–æ–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –±–µ–∑ —Ç–µ—Å—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç (normalizeMessageContent, etc)
2. –¢–µ—Å—Ç—ã –¥–ª—è Redux slices
3. –¢–µ—Å—Ç—ã –¥–ª—è Socket.IO handlers (—Å mock socket)
4. Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö flows
5. –†–∞—Å—à–∏—Ä–∏—Ç—å E2E —Ç–µ—Å—Ç—ã

---

#### 4.4. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
**–ü—Ä–æ–±–ª–µ–º–∞:**
- Console.log –≤–º–µ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ (Sentry/etc)
- –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ rate limit violations

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Winston/Pino)
2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏: –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry/DataDog –¥–ª—è error tracking
4. –î–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

---

## üü° –°–†–ï–î–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 5. **–ü—Ä–æ–±–ª–µ–º—ã UX**

#### 5.1. –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω—è—Ç–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ù–µ—Ç —á–µ—Ç–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–æ—á—Ç–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è...", "–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ", "–ø—Ä–æ—á–∏—Ç–∞–Ω–æ"
2. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º
3. –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è pending —Å–æ–æ–±—â–µ–Ω–∏–π
4. –ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

#### 5.2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è mobile
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö
- –ë–æ–ª—å—à–∏–µ payloads –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- –ù–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ UI –¥–ª—è –º–∞–ª—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 3G/4G
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. Progressive loading
4. Responsive design improvements

---

## üìà –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚ö° –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–°—Ä–æ—á–Ω–æ - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
1. **–£–¥–∞–ª–∏—Ç—å password –∏–∑ select –≤ getOnlineUsers** - 15 –º–∏–Ω
2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –≤ REST API** - 30 –º–∏–Ω
3. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å rate limiting –Ω–∞ —Å–µ—Ä–≤–µ—Ä** - 4-6 —á–∞—Å–æ–≤
4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å Math.random() –≤ React keys** - 15 –º–∏–Ω
5. **–î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏** - 1-2 —á–∞—Å–∞
6. **–î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π** - 2-4 —á–∞—Å–∞

### üîÑ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
7. **–†–∞–∑–¥–µ–ª–∏—Ç—å useChatNew –Ω–∞ –º–µ–Ω—å—à–∏–µ —Ö—É–∫–∏** - 2-3 –¥–Ω—è
8. **–£–±—Ä–∞—Ç—å @ts-nocheck –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é** - 1-2 –¥–Ω—è
9. **–î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è ChatLog** - 4-6 —á–∞—Å–æ–≤
10. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å activeUsers –≤ Redis** - 1 –¥–µ–Ω—å
11. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** - 1 –¥–µ–Ω—å
12. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞—Ç—á–∏–Ω–≥ –ë–î –∑–∞–ø—Ä–æ—Å–æ–≤** - 4-6 —á–∞—Å–æ–≤

### üìä –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–£–ª—É—á—à–µ–Ω–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–æ)
13. **–î–æ–±–∞–≤–∏—Ç—å unit –∏ integration —Ç–µ—Å—Ç—ã** - 1-2 –Ω–µ–¥–µ–ª–∏
14. **–î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª—è SidebarLeft** - 4 —á–∞—Å–∞
15. **–£–ª—É—á—à–∏—Ç—å UX –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** - 2-3 –¥–Ω—è
16. **–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - 1 –¥–µ–Ω—å
17. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry** - 4 —á–∞—Å–∞
18. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è mobile** - 1 –Ω–µ–¥–µ–ª—è

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (1 –Ω–µ–¥–µ–ª—è)
1. –£–¥–∞–ª–∏—Ç—å —É—Ç–µ—á–∫—É –ø–∞—Ä–æ–ª—è –≤ getOnlineUsers
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å rate limiting –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
5. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Math.random() keys

### –§–∞–∑–∞ 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (2-3 –Ω–µ–¥–µ–ª–∏)
1. –†–∞–∑–¥–µ–ª–∏—Ç—å useChatNew –Ω–∞ –º–æ–¥—É–ª—å–Ω—ã–µ —Ö—É–∫–∏
2. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ state management
3. –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏
4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å activeUsers –≤ Redis
5. –£–±—Ä–∞—Ç—å @ts-nocheck

### –§–∞–∑–∞ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1-2 –Ω–µ–¥–µ–ª–∏)
1. –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–ø–∏—Å–∫–æ–≤
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ë–î –∑–∞–ø—Ä–æ—Å—ã
3. –î–æ–±–∞–≤–∏—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

### –§–∞–∑–∞ 4: –ö–∞—á–µ—Å—Ç–≤–æ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –Ω–µ–¥–µ–ª–∏)
1. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
2. –†–∞—Å—à–∏—Ä–∏—Ç—å E2E —Ç–µ—Å—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å error tracking
4. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 5: UX —É–ª—É—á—à–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)
1. –£–ª—É—á—à–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è mobile
3. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

---

## üìä –ú–ï–¢–†–ò–ö–ò –î–õ–Ø –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ rate limit violations
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - –ü–æ–ø—ã—Ç–∫–∏ –æ–±—Ö–æ–¥–∞ –∑–∞—â–∏—Ç—ã

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (p50, p95, p99)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - Memory usage
   - CPU usage
   - –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - Success rate –¥–æ—Å—Ç–∞–≤–∫–∏
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏
   - Reconnection rate

4. **UX:**
   - –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - Bounce rate –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á–∞—Ç–∞

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - DOMPurify –¥–ª—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ HTML –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
   - Helmet.js –¥–ª—è HTTP headers
   - Rate limiter middleware

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - React Query –¥–ª—è server state
   - react-window –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏
   - Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–ö–∞—á–µ—Å—Ç–≤–æ:**
   - Jest + React Testing Library
   - Playwright –¥–ª—è E2E
   - ESLint + Prettier
   - Husky –¥–ª—è pre-commit hooks

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - Sentry –¥–ª—è error tracking
   - DataDog/Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
   - Winston/Pino –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### Best Practices:
1. Code review –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–∞—Ç–∞
2. –†–µ–≥—É–ª—è—Ä–Ω—ã–π security audit
3. Performance budget –¥–ª—è bundle size
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. Changelog –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´ –ú–û–î–£–õ–Ø

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É:

1. ‚úÖ **–•–æ—Ä–æ—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è Socket.IO —Å–æ–±—ã—Ç–∏–π
2. ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lucia –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–π
3. ‚úÖ **Permissions —Å–∏—Å—Ç–µ–º–∞** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ —Ä–æ–ª–µ–π
4. ‚úÖ **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ clientId –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
5. ‚úÖ **–û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π** - Redux —Å–ª–∞–π—Å –¥–ª—è offline –ø–æ–¥–¥–µ—Ä–∂–∫–∏
6. ‚úÖ **React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ù–µ—Ç XSS —á–µ—Ä–µ–∑ JSX
7. ‚úÖ **Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ API** - rateLimitService –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
8. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ namespace, API, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
9. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - logger –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
10. ‚úÖ **Real-time —Å—Ç–∞—Ç—É—Å—ã** - Online/offline detection

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ú–æ–¥—É–ª—å —á–∞—Ç–∞ –∏–º–µ–µ—Ç **—Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π** –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö:

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ rate limiting –∏ —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å useChatNew —Ö—É–∫–∞
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** - @ts-nocheck, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
5. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ race conditions –∏ memory issues

**–û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:** 6/10  
**–û—Ü–µ–Ω–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 9/10

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–§–∞–∑–∞ 1), –∑–∞—Ç–µ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. –ù–µ –ø—ã—Ç–∞—Ç—å—Å—è –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É - –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.

**–í—Ä–µ–º—è –Ω–∞ –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** 8-12 –Ω–µ–¥–µ–ª—å (—Å —É—á–µ—Ç–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ QA)

---

**–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥–µ–Ω:** Junie AI Assistant  
**–î–∞—Ç–∞:** 2025-11-16  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
