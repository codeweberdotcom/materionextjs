# –ê–Ω–∞–ª–∏–∑: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Bull Queue Server –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:** 2025-11-25  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

---

## üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞

–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Bull –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∏–∑ Docker –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è:

- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Redis (`redis/docker-compose.yml`)
- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Bull Queue (`src/services/notifications/NotificationQueue.ts`)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º (Prometheus, Grafana)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Docker –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:

- –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ `package.json`
- –ò–∑—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö npm —Å–∫—Ä–∏–ø—Ç–æ–≤

---

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –¢–µ–∫—É—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

1. **Bull —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
   - `bull: ^4.16.5` –≤ dependencies
   - `@types/bull: ^4.10.4` –≤ dependencies

2. **Redis —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - `redis/docker-compose.yml` - –±–∞–∑–æ–≤—ã–π Redis 7 Alpine
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Socket.IO adapter –∏ presence store
   - –ü–æ—Ä—Ç: 6379

3. **–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π:**
   - `src/services/notifications/NotificationQueue.ts` - singleton —Å Bull
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ in-memory fallback –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ Redis
   - –ö–∞–Ω–∞–ª—ã: email, SMS, Telegram, browser push

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ UI –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–µ–π**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏
   - –í–ª–∏—è–Ω–∏–µ: –°—Ä–µ–¥–Ω–µ–µ
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π

2. **–ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –û—á–µ—Ä–µ–¥–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ç–æ–º –∂–µ –ø—Ä–æ—Ü–µ—Å—Å–µ, —á—Ç–æ –∏ Next.js
   - –í–ª–∏—è–Ω–∏–µ: –°—Ä–µ–¥–Ω–µ–µ (–¥–ª—è production –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ—Ç –µ–¥–∏–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ —Å –æ—á–µ—Ä–µ–¥—è–º–∏
   - –í–ª–∏—è–Ω–∏–µ: –ù–∏–∑–∫–æ–µ
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **Bull Board UI**
   - –ì–æ—Ç–æ–≤—ã–π Docker –æ–±—Ä–∞–∑ `deadly0/bull-board`
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–µ–π
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á: waiting, active, completed, failed

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Redis**
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π `materio-redis`
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π Redis –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

3. **–û—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ—Ä–∫–µ—Ä**
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π
   - –£–ª—É—á—à–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –≤ production

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `queues/` —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**
   - –û–ø–∏—Å–∞–Ω–∏–µ: Docker Compose —Å Bull Board UI
   - –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –ù–∏–∑–∫–∞—è
   - –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 30 –º–∏–Ω—É—Ç

2. **–î–æ–±–∞–≤–∏—Ç—å npm —Å–∫—Ä–∏–ø—Ç—ã**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π
   - –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –ù–∏–∑–∫–∞—è
   - –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 15 –º–∏–Ω—É—Ç

3. **–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ—Ä–∫–µ—Ä**
   - –û–ø–∏—Å–∞–Ω–∏–µ: TypeScript —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Next.js
   - –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –°—Ä–µ–¥–Ω—è—è
   - –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 1 —á–∞—Å

4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π dev**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ö–æ–º–∞–Ω–¥–∞ `pnpm dev:with-socket:monitoring:with-redis:with-bull`
   - –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –ù–∏–∑–∫–∞—è
   - –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 10 –º–∏–Ω—É—Ç

---

## üìù –í—ã–≤–æ–¥—ã

–ü—Ä–æ–µ–∫—Ç —É–∂–µ –∏–º–µ–µ—Ç –±–∞–∑–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Bull –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å:
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É Docker –¥–ª—è Bull Board UI
- –û—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π
- –£–¥–æ–±–Ω—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](../../plans/active/plan-bull-queue-docker-setup-2025-11-25.md)
- [–û—Ç—á—ë—Ç](../../reports/deployment/report-bull-queue-docker-setup-2025-11-25.md)




