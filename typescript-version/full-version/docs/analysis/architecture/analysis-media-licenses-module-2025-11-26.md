# –ê–Ω–∞–ª–∏–∑: –ú–æ–¥—É–ª—å –ª–∏—Ü–µ–Ω–∑–∏–π –º–µ–¥–∏–∞

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:** 2025-11-26  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

---

## üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∏–¥–µ–æ, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–æ–¥—É–ª–µ–º Media.

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –ß—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è:

- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å Media (–ú–µ–¥–∏–∞—Ç–µ–∫–∞)
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ª–∏—Ü–µ–Ω–∑–∏—è–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–≤–∏–¥–µ–æ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (—Ç–æ–≤–∞—Ä—ã, –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∫–æ–º–ø–∞–Ω–∏–∏)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ª–∏—Ü–µ–Ω–∑–∏–π (PDF –∏ –¥—Ä.)

### –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:

- –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–æ–¥–µ–ª–∏ `Media` –≤ Prisma
- –ò–∑—É—á–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ (Roles, Translations, Accounts)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ–º—ã—Ö –ø–æ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–æ–¥–µ–ª—å Media:

```prisma
model Media {
  id              String   @id @default(cuid())
  filename        String
  slug            String   @unique
  localPath       String?
  s3Key           String?
  storageStatus   String   @default("local_only")
  mimeType        String
  size            Int
  entityType      String   // user_avatar, listing_image, etc.
  entityId        String?  // ID —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
  uploadedBy      String?  // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  alt             String?  // SEO alt —Ç–µ–∫—Å—Ç
  title           String?
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

**–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:**
- ‚úÖ `uploadedBy` ‚Äî –∞–≤—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ `entityType` ‚Äî —Ç–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏
- ‚úÖ `entityId` ‚Äî ID —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
- ‚úÖ `alt`, `title` ‚Äî SEO –ø–æ–ª—è

**–ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå `caption` ‚Äî –ø–æ–¥–ø–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚ùå `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è SEO
- ‚ùå –°–≤—è–∑—å —Å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏

---

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ª–∏—Ü–µ–Ω–∑–∏—è–º (–∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–∏–ø |
|------|----------|-----|
| –¢–∏–ø –ª–∏—Ü–µ–Ω–∑–∏–∏ | RF, RM, CC, Editorial, Custom | Enum |
| –ê–≤—Ç–æ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∞—Ä–∞ | –í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∞–≤ | String |
| –õ–∏—Ü–µ–Ω–∑–∏–∞—Ç | –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ª–∏—Ü–µ–Ω–∑–∏–∏ | String |
| –î–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ | –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å—É—â–Ω–æ—Å—Ç–∏ | Relation |
| –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ | DateTime |
| URL-–∞–¥—Ä–µ—Å —Ç–æ–≤–∞—Ä–∞ | –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä | String |
| –î–æ–∫—É–º–µ–Ω—Ç | PDF –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª | File |

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

1. **–û—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å MediaLicense**
   - –õ–∏—Ü–µ–Ω–∑–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º
   - –û–¥–∏–Ω –º–µ–¥–∏–∞—Ñ–∞–π–ª –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–∏—Ü–µ–Ω–∑–∏–π (—Ä–∞–∑–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏/—Å—Ä–æ–∫–∏)

2. **–°–≤—è–∑—å Many-to-Many —á–µ—Ä–µ–∑ MediaLicenseItem**
   - –ì–∏–±–∫–æ—Å—Ç—å: –æ–¥–Ω–∞ –ª–∏—Ü–µ–Ω–∑–∏—è ‚Üí –º–Ω–æ–≥–æ —Ñ–∞–π–ª–æ–≤
   - –ì–∏–±–∫–æ—Å—Ç—å: –æ–¥–∏–Ω —Ñ–∞–π–ª ‚Üí –º–Ω–æ–≥–æ –ª–∏—Ü–µ–Ω–∑–∏–π

3. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
   - –î–æ–∫—É–º–µ–Ω—Ç—ã –ª–∏—Ü–µ–Ω–∑–∏–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `public/uploads/licenses/`
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF, JPG, PNG —Ñ–æ—Ä–º–∞—Ç–æ–≤

### –¢–∏–ø—ã –ª–∏—Ü–µ–Ω–∑–∏–π:

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|----------|
| `royalty_free` | Royalty-Free | –†–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂, –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| `rights_managed` | Rights-Managed | –û–ø–ª–∞—Ç–∞ –∑–∞ –∫–∞–∂–¥–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| `creative_commons` | Creative Commons | –°–≤–æ–±–æ–¥–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ |
| `editorial` | Editorial | –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| `exclusive` | Exclusive | –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ |
| `custom` | –î—Ä—É–≥–∞—è | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø |

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö Prisma

**MediaLicense:**
```prisma
model MediaLicense {
  id              String   @id @default(cuid())
  
  // –¢–∏–ø –ª–∏—Ü–µ–Ω–∑–∏–∏
  licenseType     String   // royalty_free, rights_managed, etc.
  licenseTypeName String?  // –ù–∞–∑–≤–∞–Ω–∏–µ –µ—Å–ª–∏ custom
  
  // –°—Ç–æ—Ä–æ–Ω—ã –ª–∏—Ü–µ–Ω–∑–∏–∏
  licensorName    String   // –ê–≤—Ç–æ—Ä/–í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∞–≤
  licensorEmail   String?
  licensorUrl     String?
  
  licenseeName    String   // –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ª–∏—Ü–µ–Ω–∑–∏–∏
  licenseeEmail   String?
  
  // –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç–æ–≤–∞—Ä—É/—Å—É—â–Ω–æ—Å—Ç–∏
  entityType      String?  // product, listing, company
  entityId        String?
  entityName      String?  // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  entityUrl       String?  // URL-–∞–¥—Ä–µ—Å —Ç–æ–≤–∞—Ä–∞
  
  // –î–æ–∫—É–º–µ–Ω—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏
  documentPath    String?
  documentName    String?
  documentSize    Int?
  documentMime    String?
  
  // –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
  validFrom       DateTime?
  validUntil      DateTime?
  territory       String?
  
  // –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
  notes           String?
  
  // –ê—É–¥–∏—Ç
  uploadedBy      String?
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  mediaItems      MediaLicenseItem[]
  
  @@map("media_licenses")
}
```

**MediaLicenseItem (—Å–≤—è–∑—å many-to-many):**
```prisma
model MediaLicenseItem {
  id        String   @id @default(cuid())
  licenseId String
  mediaId   String
  
  license   MediaLicense @relation(fields: [licenseId], references: [id], onDelete: Cascade)
  media     Media        @relation(fields: [mediaId], references: [id], onDelete: Cascade)
  
  createdAt DateTime @default(now())
  
  @@unique([licenseId, mediaId])
  @@map("media_license_items")
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Media:**
```prisma
model Media {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
  
  // SEO (–¥–æ–±–∞–≤–∏—Ç—å)
  caption     String?
  description String?
  
  // –°–≤—è–∑—å —Å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏ (–¥–æ–±–∞–≤–∏—Ç—å)
  licenses    MediaLicenseItem[]
}
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/admin/media/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ licenses/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ route.ts              # GET, POST
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ route.ts          # GET, PUT, DELETE
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ document/
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ route.ts      # POST (upload), GET (download)
‚îÇ   ‚îî‚îÄ‚îÄ [lang]/(dashboard)/(private)/admin/media/
‚îÇ       ‚îî‚îÄ‚îÄ licenses/
‚îÇ           ‚îú‚îÄ‚îÄ page.tsx              # –°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π
‚îÇ           ‚îî‚îÄ‚îÄ [id]/
‚îÇ               ‚îî‚îÄ‚îÄ page.tsx          # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ views/admin/media/
    ‚îú‚îÄ‚îÄ MediaLicenses.tsx             # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
    ‚îî‚îÄ‚îÄ MediaLicenseForm.tsx          # –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

### 3. API Endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/api/admin/media/licenses` | –°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |
| POST | `/api/admin/media/licenses` | –°–æ–∑–¥–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é |
| GET | `/api/admin/media/licenses/[id]` | –ü–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é |
| PUT | `/api/admin/media/licenses/[id]` | –û–±–Ω–æ–≤–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é |
| DELETE | `/api/admin/media/licenses/[id]` | –£–¥–∞–ª–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é |
| POST | `/api/admin/media/licenses/[id]/document` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç |
| GET | `/api/admin/media/licenses/[id]/document` | –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç |

### 4. –ù–∞–≤–∏–≥–∞—Ü–∏—è

–î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç "–õ–∏—Ü–µ–Ω–∑–∏–∏" –≤ –±–ª–æ–∫ "Media":
```
–ú–µ–¥–∏–∞
‚îú‚îÄ‚îÄ –ú–µ–¥–∏–∞—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ –í–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏
‚îî‚îÄ‚îÄ üìú –õ–∏—Ü–µ–Ω–∑–∏–∏    ‚Üê –ù–æ–≤—ã–π –ø—É–Ω–∫—Ç
```

### 5. Seed –¥–∞–Ω–Ω—ã–µ

- 2-3 –¥–µ–º–æ-–ª–∏—Ü–µ–Ω–∑–∏–∏
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–µ–º–æ-–º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º

---

## üìù –í—ã–≤–æ–¥—ã

1. **–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å:**
   - 2 –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏: `MediaLicense`, `MediaLicenseItem`
   - –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å `Media` (–¥–æ–±–∞–≤–∏—Ç—å `caption`, `description`, —Å–≤—è–∑—å —Å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏)
   - API endpoints –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
   - UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã: —Å–ø–∏—Å–æ–∫ –∏ —Ñ–æ—Ä–º–∞
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è: –ø—É–Ω–∫—Ç –º–µ–Ω—é "–õ–∏—Ü–µ–Ω–∑–∏–∏"
   - Seed –¥–∞–Ω–Ω—ã–µ

2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
   - –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 2-3 —á–∞—Å–∞

3. **–†–∏—Å–∫–∏:**
   - –ù–∏–∑–∫–∏–µ: —Å–ª–µ–¥—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [ROOT_FILES_DESCRIPTION.md](../../ROOT_FILES_DESCRIPTION.md) ‚Äî –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π
- [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](../../plans/active/plan-media-licenses-module-2025-11-26.md) ‚Äî –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞

