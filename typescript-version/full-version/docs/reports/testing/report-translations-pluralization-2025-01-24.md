# ะัััั: ะะฝะพะถะตััะฒะตะฝะฝัะต ัะพัะผั (Pluralization) ะดะปั ะผะพะดัะปั ะฟะตัะตะฒะพะดะพะฒ

**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั:** 2025-01-24  
**ะกัะฐััั:** โ ะะฐะฒะตััะตะฝะพ  
**ะะปะฐะฝ:** [plan-translations-module-pluralization-2025-01-24.md](../../plans/completed/plan-translations-module-pluralization-2025-01-24.md)

---

## ๐ ะะฑะทะพั

ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะฟะพะดะดะตัะถะบะฐ ะผะฝะพะถะตััะฒะตะฝะฝัั ัะพัะผ (pluralization) ะดะปั ัะทัะบะพะฒ ั ะบะพะผะฟะปะตะบัะฝัะผะธ ะฟัะฐะฒะธะปะฐะผะธ ัะบะปะพะฝะตะฝะธั (ััััะบะธะน, ะฐัะฐะฑัะบะธะน, ะฟะพะปััะบะธะน ะธ ะดั.) ะฒ ะผะพะดัะปะต ะฟะตัะตะฒะพะดะพะฒ.

---

## โ ะัะฟะพะปะฝะตะฝะฝัะต ะทะฐะดะฐัะธ

### 1. ะฃัะธะปะธัั ะดะปั Pluralization

**ะคะฐะนะป:** `src/utils/translations/pluralization.ts`

**ะะตะฐะปะธะทะพะฒะฐะฝะพ:**
- ะัะฐะฒะธะปะฐ ะผะฝะพะถะตััะฒะตะฝะฝัั ัะพัะผ ะดะปั ััััะบะพะณะพ ัะทัะบะฐ:
  - `one`: 1, 21, 31, 41...
  - `few`: 2-4, 22-24, 32-34...
  - `many`: 0, 5-20, 25-30...
- ะัะฐะฒะธะปะฐ ะดะปั ะฐะฝะณะปะธะนัะบะพะณะพ, ััะฐะฝััะทัะบะพะณะพ ะธ ะฐัะฐะฑัะบะพะณะพ ัะทัะบะพะฒ
- ะคัะฝะบัะธั `getPluralForm()` โ ะพะฟัะตะดะตะปะตะฝะธะต ัะพัะผั ะฟะพ ัะธัะปั ะธ ัะทัะบั
- ะคัะฝะบัะธั `formatTranslation()` โ ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ั ะฟะพะดััะฐะฝะพะฒะบะพะน ะฟะตัะตะผะตะฝะฝัั
- ะะพะดะดะตัะถะบะฐ ัะพัะผะฐัะพะฒ `{{var}}` ะธ `${var}`

### 2. ะฅัะบ useTranslate

**ะคะฐะนะป:** `src/hooks/useTranslate.ts`

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะพะดะดะตัะถะบะฐ plural forms
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต ัะพัะผั ะผะฝะพะถะตััะฒะตะฝะฝะพะณะพ ัะธัะปะฐ ะฝะฐ ะพัะฝะพะฒะต ัะทัะบะฐ
- ะะพะดะดะตัะถะบะฐ ะฟะตัะตะผะตะฝะฝัั ะฒ ะฟะตัะตะฒะพะดะฐั
- ะะฑัะฐะฑะพัะบะฐ ะบะฐะบ JSON-ัััะพะบ ะธะท ะะ, ัะฐะบ ะธ ะพะฑัะตะบัะพะฒ ะธะท JSON ัะฐะนะปะพะฒ
- ะะพะดะดะตัะถะบะฐ ะฒะปะพะถะตะฝะฝัั ะบะปััะตะน ัะตัะตะท ัะพัะบั

**ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**
```typescript
import { useTranslate } from '@/hooks/useTranslate'

const { t } = useTranslate()

// ะัะพััะพะน ะฟะตัะตะฒะพะด
t('navigation.dashboard') // โ "ะะฐะฝะตะปั ัะฟัะฐะฒะปะตะฝะธั"

// ะก ะฟะตัะตะผะตะฝะฝัะผะธ
t('messages.welcome', { name: 'ะะฒะฐะฝ' }) // โ "ะัะธะฒะตั, ะะฒะฐะฝ!"

// ะก plural (ะดะปั ััััะบะพะณะพ ัะทัะบะฐ)
t('navigation.totalUsersCount', { count: 1 })  // โ "ะัะตะณะพ 1 ะฟะพะปัะทะพะฒะฐัะตะปั"
t('navigation.totalUsersCount', { count: 3 })  // โ "ะัะตะณะพ 3 ะฟะพะปัะทะพะฒะฐัะตะปั"
t('navigation.totalUsersCount', { count: 5 })  // โ "ะัะตะณะพ 5 ะฟะพะปัะทะพะฒะฐัะตะปะตะน"
```

### 3. ะะฑะฝะพะฒะปะตะฝะธะต ะฒะฐะปะธะดะฐัะธะธ

**ะคะฐะนะป:** `src/lib/validations/translation-schemas.ts`

- ะะฑะฝะพะฒะปะตะฝะฐ ััะตะผะฐ ะฒะฐะปะธะดะฐัะธะธ ะดะปั ะฟะพะดะดะตัะถะบะธ plural forms
- ะะพะดะดะตัะถะบะฐ ะทะฝะฐัะตะฝะธั ะบะฐะบ ัััะพะบะธ, ัะฐะบ ะธ JSON-ะพะฑัะตะบัะฐ ั ัะพัะผะฐะผะธ

### 4. ะะฑะฝะพะฒะปะตะฝะธะต ะธะผะฟะพััะฐ/ัะบัะฟะพััะฐ

**ะคะฐะนะป:** `src/utils/translations/export-helper.ts`

- ะคัะฝะบัะธั `processTranslationValue()` ะดะปั ะพะฑัะฐะฑะพัะบะธ ะพะฑัะตะบัะพะฒ plural forms
- ะัะธ ะธะผะฟะพััะต: ะพะฑัะตะบัั ะธะท JSON ะฟัะตะพะฑัะฐะทััััั ะฒ JSON-ัััะพะบะธ ะดะปั ะะ
- ะัะธ ัะบัะฟะพััะต: JSON-ัััะพะบะธ ะธะท ะะ ะฟัะตะพะฑัะฐะทััััั ะพะฑัะฐัะฝะพ ะฒ ะพะฑัะตะบัั

### 5. Plural Forms ะฒ ััััะบะพะผ ัะปะพะฒะฐัะต

**ะคะฐะนะป:** `src/data/dictionaries/ru.json`

ะะพะฑะฐะฒะปะตะฝั plural forms ะดะปั:
- `daysAgo`, `hoursAgo`, `minutesAgo`
- `totalUsers`, `totalUsersCount`
- `confirmBulkActivate`, `confirmBulkDeactivate`, `confirmBulkDelete`
- `bulkOperationSuccess`, `bulkOperationPartialSuccess`
- `errorsCount`, `warningsCount`, `duplicatesFound`
- `recordsExported`, `recordsImported`, `recordsFailed`, `recordsProcessed`
- `rowsWillBeSkipped`, `translationsImportSuccess`
- `waitMessage`, `rateLimitMessage`, `rateLimitWarning`
- `viewingLabel`, `tableSubtitle`

### 6. UI ะดะปั Plural Forms

**ะคะฐะนะป:** `src/views/apps/references/translations/AddTranslationDialog.tsx`

- ะะพะทะผะพะถะฝะพััั ะฒะฒะพะดะฐ plural forms ัะตัะตะท UI
- ะะตัะตะบะปััะฐัะตะปั ะผะตะถะดั ะพะฑััะฝัะผ ะทะฝะฐัะตะฝะธะตะผ ะธ plural forms
- ะะพะปั ะดะปั ะฒะฒะพะดะฐ `one`, `few`, `many`, `other`

**ะคะฐะนะป:** `src/views/apps/references/translations/TranslationsListTable.tsx`

- ะคะธะปัััั ะดะปั ะบะพะปะพะฝะพะบ ัะฐะฑะปะธัั
- ะกะฟะธะฝะฝะตัั ะดะปั ะบะฝะพะฟะพะบ ะธะผะฟะพััะฐ/ัะบัะฟะพััะฐ
- ะัะฟัะฐะฒะปะตะฝั ะฟะตัะตะฒะพะดั ะดะปั ัะพััะพัะฝะธะน ะทะฐะณััะทะบะธ

### 7. ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะพะบ

**ะคะฐะนะป:** `src/views/apps/roles/RoleCards.tsx`

- ะัะฟัะฐะฒะปะตะฝะฐ ะพัะธะฑะบะฐ `TypeError: t.navigation.totalUsersCount.replace is not a function`
- ะะฐะผะตะฝัะฝ ะฟััะผะพะน ะดะพัััะฟ ะบ ัะปะพะฒะฐัั ะฝะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต `useTranslate()`
- ะะพััะตะบัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ plural forms ะฒ ะบะพะผะฟะพะฝะตะฝัะต

---

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะฅัะฐะฝะตะฝะธะต ะดะฐะฝะฝัั

**ะ ะะ (ะฟะพะปะต `value`):**
```json
"{\"one\":\"{{count}} ะฟะพะปัะทะพะฒะฐัะตะปั\",\"few\":\"{{count}} ะฟะพะปัะทะพะฒะฐัะตะปั\",\"many\":\"{{count}} ะฟะพะปัะทะพะฒะฐัะตะปะตะน\"}"
```

**ะ JSON ัะฐะนะปะฐั:**
```json
{
  "one": "{{count}} ะฟะพะปัะทะพะฒะฐัะตะปั",
  "few": "{{count}} ะฟะพะปัะทะพะฒะฐัะตะปั",
  "many": "{{count}} ะฟะพะปัะทะพะฒะฐัะตะปะตะน"
}
```

### ะัะฐะฒะธะปะฐ Pluralization ะดะปั ััััะบะพะณะพ ัะทัะบะฐ

```typescript
function getRussianPluralForm(n: number): 'one' | 'few' | 'many' {
  const mod10 = n % 10
  const mod100 = n % 100
  
  if (mod10 === 1 && mod100 !== 11) return 'one'
  if (mod10 >= 2 && mod10 <= 4 && (mod100 < 10 || mod100 >= 20)) return 'few'
  return 'many'
}
```

**ะัะธะผะตัั:**
| ะงะธัะปะพ | ะคะพัะผะฐ | ะัะธะผะตั |
|-------|-------|--------|
| 1, 21, 31 | one | 1 ะฟะพะปัะทะพะฒะฐัะตะปั |
| 2, 3, 4, 22, 23 | few | 2 ะฟะพะปัะทะพะฒะฐัะตะปั |
| 0, 5-20, 25-30 | many | 5 ะฟะพะปัะทะพะฒะฐัะตะปะตะน |

---

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
src/
โโโ utils/
โ   โโโ translations/
โ       โโโ pluralization.ts       # ะฃัะธะปะธัั pluralization
โ       โโโ export-helper.ts       # ะะผะฟะพัั/ัะบัะฟะพัั plural forms
โโโ hooks/
โ   โโโ useTranslate.ts            # ะฅัะบ ะดะปั ะฟะตัะตะฒะพะดะพะฒ
โโโ lib/
โ   โโโ validations/
โ       โโโ translation-schemas.ts  # ะะฐะปะธะดะฐัะธั plural forms
โโโ data/
โ   โโโ dictionaries/
โ       โโโ ru.json                 # Plural forms ะดะปั ััััะบะพะณะพ
โ       โโโ en.json
โ       โโโ fr.json
โ       โโโ ar.json
โโโ views/
    โโโ apps/
        โโโ references/translations/
        โ   โโโ AddTranslationDialog.tsx   # UI ะดะปั plural forms
        โ   โโโ TranslationsListTable.tsx  # ะคะธะปัััั, ัะฟะธะฝะฝะตัั
        โโโ roles/
            โโโ RoleCards.tsx              # ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะบะธ
```

---

## ๐ ะะตะทัะปััะฐัั

| ะะตััะธะบะฐ | ะะพ | ะะพัะปะต |
|---------|-----|-------|
| ะะพะดะดะตัะถะบะฐ plural forms | โ | โ RU, EN, FR, AR |
| UI ะดะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั | โ | โ Dialog ั ัะพัะผะฐะผะธ |
| ะะผะฟะพัั/ัะบัะฟะพัั | ะขะพะปัะบะพ ัััะพะบะธ | โ + JSON ะพะฑัะตะบัั |
| ะฅัะบ useTranslate | โ | โ ะก ะฟะตัะตะผะตะฝะฝัะผะธ ะธ plural |

---

## ๐ ะกะฒัะทะฐะฝะฝัะต ะดะพะบัะผะตะฝัั

- [ะะปะฐะฝ pluralization](../../plans/completed/plan-translations-module-pluralization-2025-01-24.md)
- [API ะดะพะบัะผะตะฝัะฐัะธั ะฟะตัะตะฒะพะดะพะฒ](../../api/translations.md)
- [ROOT_FILES_DESCRIPTION.md](../../ROOT_FILES_DESCRIPTION.md) โ ัะตะบัะธั "ะะตัะตะฒะพะดั"

---

*ะัััั ัะพะทะดะฐะฝ: 2025-11-29*

