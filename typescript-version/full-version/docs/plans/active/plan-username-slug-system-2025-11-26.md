# –ü–ª–∞–Ω: –°–∏—Å—Ç–µ–º–∞ Username/Slug –¥–ª—è User –∏ Account

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-26  
**–°—Ç–∞—Ç—É—Å:** üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

## –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ username (–¥–ª—è User) –∏ slug (–¥–ª—è Account) –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω—ã—Ö URL –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–æ–¥–∞–≤—Ü–æ–≤.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è | –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/—Å–æ–∑–¥–∞–Ω–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å | –ì–ª–æ–±–∞–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–∞–±–ª–∏—Ü—ã |
| –ò–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å | –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ä–∞–∑ –≤ 30 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ) |
| –ò—Å—Ç–æ—Ä–∏—è | –•—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ slug –¥–ª—è 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ |
| –§–æ—Ä–º–∞—Ç | –¢–æ–ª—å–∫–æ lowercase –ª–∞—Ç–∏–Ω–∏—Ü–∞, —Ü–∏—Ñ—Ä—ã, underscore |

### –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è

```
–ò—Å—Ç–æ—á–Ω–∏–∫                    ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤                 ‚Üí ivan_petrov
–ê–Ω–Ω–∞-–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞          ‚Üí anna_maria_ivanova
–û–û–û "–†–æ–º–∞—à–∫–∞"               ‚Üí ooo_romashka
BMW Official Store          ‚Üí bmw_official_store
Caf√© & Restaurant           ‚Üí cafe_restaurant
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å123             ‚Üí polzovatel123

–ï—Å–ª–∏ –∑–∞–Ω—è—Ç–æ:
ivan_petrov                 ‚Üí ivan_petrov_1
ivan_petrov_1               ‚Üí ivan_petrov_2
```

### –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã

```
? = ; : @ # $ % ^ & * ( ) + [ ] { } | \ / < > " ' ` ~
```

### –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞

```
admin, administrator, support, help, api, www, static, 
assets, user, users, account, accounts, settings, profile,
login, logout, register, auth, admin, moderator, system,
null, undefined, true, false, new, edit, delete, create
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ö–µ–º–∞ –ë–î

```prisma
// –î–æ–±–∞–≤–∏—Ç—å –≤ User
model User {
  id                String    @id @default(cuid())
  username          String    @unique
  usernameChangedAt DateTime? // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ username
  name              String?
  ...
}

// –î–æ–±–∞–≤–∏—Ç—å –≤ UserAccount
model UserAccount {
  id            String    @id @default(cuid())
  slug          String    @unique
  slugChangedAt DateTime? // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ slug
  name          String
  ...
}

// –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
model SlugHistory {
  id         String   @id @default(cuid())
  entityType String   // 'user' | 'account'
  entityId   String   // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
  oldSlug    String   // –°—Ç–∞—Ä—ã–π slug
  newSlug    String   // –ù–æ–≤—ã–π slug
  changedAt  DateTime @default(now())
  
  @@index([entityType, oldSlug])
  @@index([entityId])
}
```

### SlugService

```typescript
interface SlugService {
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è slug –∏–∑ —Ç–µ–∫—Å—Ç–∞
  generateSlug(source: string): string
  
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ slug —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤ –ë–î
  generateUniqueSlug(
    source: string, 
    entityType: 'user' | 'account',
    excludeId?: string
  ): Promise<string>
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  isSlugAvailable(
    slug: string, 
    entityType: 'user' | 'account',
    excludeId?: string
  ): Promise<boolean>
  
  // –°–º–µ–Ω–∞ slug —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–∞
  changeSlug(
    entityType: 'user' | 'account',
    entityId: string,
    newSlug: string
  ): Promise<{ success: boolean; error?: string }>
  
  // –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ä–æ–º—É slug (–¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞)
  findByOldSlug(
    entityType: 'user' | 'account',
    oldSlug: string
  ): Promise<{ currentSlug: string; entityId: string } | null>
  
  // –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
  transliterate(text: string): string
}
```

### URL –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
/user/[username]     ‚Üí –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/company/[slug]      ‚Üí –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–ø–∞–Ω–∏–∏ (–∞–∫–∫–∞—É–Ω—Ç–∞)
```

### Middleware –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤

```typescript
// middleware.ts
if (pathname.startsWith('/user/') || pathname.startsWith('/company/')) {
  const type = pathname.split('/')[1] // 'user' | 'company'
  const slug = pathname.split('/')[2]
  const entityType = type === 'user' ? 'user' : 'account'
  const redirect = await slugService.findByOldSlug(entityType, slug)
  if (redirect) {
    return NextResponse.redirect(`/${type}/${redirect.currentSlug}`, 301)
  }
}
```

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (1-2 —á–∞—Å–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ schema.prisma
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å SlugHistory
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å username —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –≠—Ç–∞–ø 2: SlugService (2-3 —á–∞—Å–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å SlugService
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–º—ë–Ω
- [ ] Unit —Ç–µ—Å—Ç—ã

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (1-2 —á–∞—Å–∞)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è username/slug –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

### –≠—Ç–∞–ø 4: API –¥–ª—è —Å–º–µ–Ω—ã slug (1-2 —á–∞—Å–∞)
- [ ] API: PUT /api/user/username
- [ ] API: PUT /api/account/[id]/slug
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ 30 –¥–Ω–µ–π
- [ ] –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é

### –≠—Ç–∞–ø 5: –ê–¥–º–∏–Ω–∫–∞ (2-3 —á–∞—Å–∞)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–∞ —Å–º–µ–Ω—ã (–¥–Ω–∏)
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ slug
- [ ] –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–º–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –≠—Ç–∞–ø 6: –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (3-4 —á–∞—Å–∞)

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã MUI:**
- `src/views/pages/user-profile/` - –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è
- `UserProfileHeader.tsx` - —à–∞–ø–∫–∞ —Å –∞–≤–∞—Ç–∞—Ä–æ–º
- `AboutOverview.tsx` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `/user/[username]/page.tsx` - –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
- [ ] –°–æ–∑–¥–∞—Ç—å `/company/[slug]/page.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–ø–∞–Ω–∏–∏
- [ ] –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `UserProfileHeader` –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] Middleware –¥–ª—è 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Å—Ç–∞—Ä—ã—Ö slug
- [ ] SEO meta tags (title, description, og:image)

### –≠—Ç–∞–ø 7: –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç (1 —á–∞—Å)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å UserAdapter
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ username –≤ CSV

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | 1-2 —á |
| SlugService | 2-3 —á |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | 1-2 —á |
| API —Å–º–µ–Ω—ã | 1-2 —á |
| –ê–¥–º–∏–Ω–∫–∞ | 2-3 —á |
| –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | 3-4 —á |
| –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç | 1 —á |
| **–ò—Ç–æ–≥–æ** | **11-17 —á** |

## –†–∏—Å–∫–∏

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| –ö–æ–ª–ª–∏–∑–∏–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ + —Å—É—Ñ—Ñ–∏–∫—Å |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–æ–µ | –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î |
| SEO –ø—Ä–∏ —Å–º–µ–Ω–µ slug | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç |

## –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä—ã)

```
–∞‚Üía  –±‚Üíb  –≤‚Üív  –≥‚Üíg  –¥‚Üíd  –µ‚Üíe  —ë‚Üíyo  –∂‚Üízh  –∑‚Üíz  –∏‚Üíi
–π‚Üíy  –∫‚Üík  –ª‚Üíl  –º‚Üím  –Ω‚Üín  –æ‚Üío  –ø‚Üíp  —Ä‚Üír  —Å‚Üís  —Ç‚Üít
—É‚Üíu  —Ñ‚Üíf  —Ö‚Üíkh —Ü‚Üíts —á‚Üích —à‚Üísh —â‚Üísch —ä‚Üí   —ã‚Üíy  —å‚Üí
—ç‚Üíe  —é‚Üíyu —è‚Üíya
```

## –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

- [ ] –ü–ª–∞–Ω —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω
- [ ] –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

