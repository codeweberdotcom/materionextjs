# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Events

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. E2E —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/monitoring/testing`
2. –ù–∞–π–¥–∏—Ç–µ "Events Integration Verification"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∑–∞–ø—É—Å–∫–∞ (‚ñ∂Ô∏è)

**–ß–µ—Ä–µ–∑ CLI:**
```bash
pnpm exec playwright test tests/e2e/events-integration.spec.ts
```

–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `correlationId` –∏ `actorId`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–±—ã—Ç–∏–π

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π

```bash
# –í—Å–µ —Å–æ–±—ã—Ç–∏—è
npm run check:events

# –°–æ–±—ã—Ç–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞
npm run check:events export

# –°–æ–±—ã—Ç–∏—è –∏–º–ø–æ—Ä—Ç–∞  
npm run check:events import

# –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
npm run check:events user_management
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

#### –≠–∫—Å–ø–æ—Ä—Ç
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/ru/apps/user/list`
2. –ù–∞–∂–º–∏—Ç–µ **"–≠–∫—Å–ø–æ—Ä—Ç"** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   ```bash
   npm run check:events export 5
   ```

#### –ò–º–ø–æ—Ä—Ç
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞–∂–º–∏—Ç–µ **"–ò–º–ø–æ—Ä—Ç"**
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª (CSV/XLSX)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∏–º–ø–æ—Ä—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   ```bash
   npm run check:events import 10
   ```

#### –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
1. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ–∫–±–æ–∫—Å—ã)
2. –ù–∞–∂–º–∏—Ç–µ **"–£–¥–∞–ª–∏—Ç—å"**, **"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"** –∏–ª–∏ **"–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—ã—Ç–∏—è:
   ```bash
   npm run check:events user_management 10
   ```

### 3. –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

‚úÖ **–°–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è:**
- `export.started` ‚Üí `export.completed` (–∏–ª–∏ `export.failed`)
- `import.started` ‚Üí `import.completed` (–∏–ª–∏ `import.failed`)
- `import.preview` (–ø—Ä–∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–µ)
- `user_management.bulk_*` ‚Üí `user_management.bulk_*_success` (–∏–ª–∏ `_failed`)

‚úÖ **Correlation ID:**
- –°–æ–±—ã—Ç–∏—è –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `correlationId`

‚úÖ **–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä (Actor):**
- –í —Å–æ–±—ã—Ç–∏—è—Ö —É–∫–∞–∑–∞–Ω `actorId` (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

‚úÖ **Payload:**
- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## üîç –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å–æ–±—ã—Ç–∏–π: 5

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º:
  export: 3 —Å–æ–±—ã—Ç–∏–π
    - export.started: 1
    - export.completed: 1
    - export.failed: 0

üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è:
1. [INFO] export.export.completed
   –°–æ–æ–±—â–µ–Ω–∏–µ: Export completed: 15 records
   –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä: user user-123
   Correlation ID: abc-123-def
   –°—É—â–Ω–æ—Å—Ç—å: users
   –§–æ—Ä–º–∞—Ç: xlsx
   –ó–∞–ø–∏—Å–µ–π: 15
```

---

## ‚ùå –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   npm run dev
   # –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   npx prisma studio
   # –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É Event
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:**
   - –°–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `docs/events-verification-guide.md`

